# YouTube链接管理工具

一个功能强大的YouTube视频链接管理工具，支持链接添加、格式化、随机推荐、主题切换等多种功能。本工具现已升级为全栈应用，包含服务端存储功能，确保数据持久化并支持多设备访问。

## 功能特性

### 核心功能
- **链接添加与管理**：添加、删除、查看YouTube视频链接
- **多链接识别**：智能识别并拆分连续输入的YouTube链接
- **链接格式化**：将多个链接格式化为清晰易读的格式
- **随机推荐**：随机生成最多20个链接推荐
- **服务端存储**：使用Node.js + Express实现的数据持久化存储
- **本地备份**：localStorage作为备用存储，确保离线可用性
- **主题切换**：支持深色/浅色主题切换

### 增强功能
- **自动高度调整**：输入框高度根据内容自动调整
- **状态提示**：操作反馈和错误提示
- **复制功能**：一键复制随机推荐链接
- **统计信息**：显示链接总数等统计数据
- **响应式设计**：适配不同屏幕尺寸
- **数据同步**：前后端数据自动同步机制

## 技术栈

- **前端**：HTML5, CSS3, JavaScript (ES6+)
- **后端**：Node.js, Express.js
- **存储**：文件系统(JSON文件) + localStorage
- **依赖管理**：npm

## 安装与部署

### 本地开发环境设置

1. **安装Node.js和npm**
   - 确保您的系统已安装Node.js 14.x或更高版本
   - 使用命令检查版本：`node -v` 和 `npm -v`

2. **克隆或下载项目**
   ```bash
   git clone <repository-url>
   cd youtube-link-manager
   ```

3. **安装依赖**
   ```bash
   npm install
   ```

4. **启动服务器**
   ```bash
   node server.js
   ```
   或使用开发模式（需要安装nodemon）：
   ```bash
   npm run dev
   ```

5. **访问应用**
   - 打开浏览器，访问 `http://localhost:3000`

### 通过Cloudflare Pages部署

1. **准备GitHub仓库**：
   - 创建一个新的GitHub仓库
   - 将项目文件上传到仓库（包括index.html、script.js、style.css、config.json、server.js、package.json等）
   - 确保仓库根目录包含所有必要文件

2. **设置Cloudflare Pages**：
   - 登录Cloudflare账号
   - 导航至Pages部分
   - 点击"创建项目"
   - 选择"连接到Git"
   - 选择您的GitHub仓库
   - 配置构建设置：
     - 框架预设：None
     - 构建命令：`npm install && npm run build`（如果需要构建）
     - 发布目录：/（根目录）

3. **注意**：对于需要服务端功能的部署，您可能需要使用Cloudflare Workers或其他支持Node.js的平台

## 数据存储

本应用采用双重存储策略：

### 1. 服务端存储（主要）
- 数据保存在服务器的`data/youtube_links.json`文件中
- 所有客户端的链接数据将保持同步
- 即使清除浏览器数据，数据仍然安全保存
- 支持多设备访问同一数据集

### 2. 本地存储（备用）
- 同时使用浏览器的localStorage作为备用存储
- 当服务器不可用时，应用会自动降级到本地存储模式
- 提供离线工作能力
- 确保在网络不稳定环境下的可用性

## 配置管理

### 1. 前端配置（config.json）

应用使用`config.json`文件进行前端配置管理，主要配置项包括：

- 应用基本信息（名称、版本、描述）
- 存储相关配置（localStorage键名等）
- 分页设置（每页显示数量等）
- 主题配置（默认主题、自动检测等）
- UI交互设置（动画、通知等）

您可以根据需要修改`config.json`文件中的配置项来自定义应用行为。

### 2. 服务器配置

服务器配置主要通过`server.js`文件中的常量定义：

- `PORT`：服务器监听端口，默认3000
- `DATA_FILE`：数据文件路径，默认`./data/youtube_links.json`
- CORS配置：允许跨域请求

## 使用方法

### 基本操作
1. **添加链接**：在输入框中粘贴YouTube链接，点击"添加"按钮或按Enter键
2. **格式化链接**：输入多个链接后，点击"格式化"按钮整理格式
3. **删除链接**：点击链接旁的"删除"按钮移除不需要的链接
4. **复制链接**：在随机推荐区域点击"复制链接"按钮
5. **切换主题**：点击右上角"切换主题"按钮

### 高级功能
- **批量输入**：可一次性粘贴多个链接，系统会自动识别
- **连续链接处理**：系统可自动拆分连续的YouTube短链接
- **随机推荐**：系统会从已添加的链接中随机推荐最多20个
- **数据同步**：添加或删除链接时，数据会自动同步到服务器

## API接口说明

### GET /api/links
- **功能**：获取所有YouTube链接
- **响应**：返回链接对象数组
- **示例**：
  ```json
  [
    {
      "id": "unique-id-123",
      "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
      "title": "Rick Astley - Never Gonna Give You Up",
      "addedDate": "2023-10-05T12:34:56.789Z"
    }
  ]
  ```

### POST /api/links
- **功能**：保存YouTube链接数据
- **请求体**：
  ```json
  {
    "links": [
      {
        "id": "unique-id-123",
        "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
        "title": "Rick Astley - Never Gonna Give You Up",
        "addedDate": "2023-10-05T12:34:56.789Z"
      }
    ]
  }
  ```
- **响应**：返回操作状态
  ```json
  {
    "success": true,
    "message": "Links saved successfully",
    "count": 1
  }
  ```

## 贡献指南

欢迎对本项目进行贡献！如果您有任何建议或想报告问题，请按照以下步骤操作：

1. **报告问题**：在GitHub Issues中创建一个新的issue，详细描述问题或建议
2. **提交代码**：
   - Fork项目仓库
   - 创建新的分支进行开发
   - 提交更改
   - 发起Pull Request
3. **代码风格**：请遵循项目现有的代码风格，保持一致性
4. **测试**：确保您的更改经过充分测试，不会破坏现有功能

## 许可证

本项目采用MIT许可证。详情请参阅LICENSE文件。

## 注意事项

1. **安全提示**：请勿在应用中存储敏感信息
2. **性能优化**：大量链接可能会影响应用性能，建议定期清理不必要的链接
3. **服务端要求**：在生产环境部署时，确保服务器有足够的存储空间和权限
4. **备份建议**：定期备份`data/youtube_links.json`文件，防止数据丢失

## 更新日志

### v2.0.0
- 实现服务端存储功能
- 升级为全栈应用
- 添加数据同步机制
- 改进错误处理

### v1.0.0
- 初始版本发布
- 基础链接管理功能
- 本地存储支持
- 主题切换功能
